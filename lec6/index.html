
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.7.4">
    
    
      
        <title>6. Nested Classes, Enums - CS2030 Programming Methodology II</title>
      
    
    
      <script src="../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-769c285a91.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Gentium+Book+Basic">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../index.html" title="CS2030 Programming Methodology II" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Lectures
                </span>
              
            
            6. Nested Classes, Enums
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/nus-cs2030/1718-s1" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    CS2030 Programming Methodology II
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/nus-cs2030/1718-s1" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../index.html" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      General
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        General
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../about/index.html" title="About" class="md-nav__link">
      About
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prereqs/index.html" title="Prerequisites" class="md-nav__link">
      Prerequisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../policies/index.html" title="Policies" class="md-nav__link">
      Policies
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../schedule/index.html" title="Schedule" class="md-nav__link">
      Schedule
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../readings/index.html" title="Readings" class="md-nav__link">
      Readings
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../reviews/index.html" title="Review Qs" class="md-nav__link">
      Review Qs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../style/index.html" title="Coding Style" class="md-nav__link">
      Coding Style
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../midterm/index.html" title="Midterm" class="md-nav__link">
      Midterm
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Lectures
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Lectures
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../lec1/index.html" title="1. Abstraction & Encapsulation" class="md-nav__link">
      1. Abstraction & Encapsulation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec2/index.html" title="2. Inheritance & Polymorphism" class="md-nav__link">
      2. Inheritance & Polymorphism
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec3/index.html" title="3. Inheritance, Continued" class="md-nav__link">
      3. Inheritance, Continued
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec4/index.html" title="4. Memory, Exceptions, Generics" class="md-nav__link">
      4. Memory, Exceptions, Generics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec5/index.html" title="5. Numbers, Strings, Collections" class="md-nav__link">
      5. Numbers, Strings, Collections
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        6. Nested Classes, Enums
      </label>
    
    <a href="index.html" title="6. Nested Classes, Enums" class="md-nav__link md-nav__link--active">
      6. Nested Classes, Enums
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#learning-outcomes" title="Learning Outcomes" class="md-nav__link">
    Learning Outcomes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unfinished-business-hash-code" title="Unfinished Business: Hash Code" class="md-nav__link">
    Unfinished Business: Hash Code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#revisit-wildcards" title="Revisit: Wildcards" class="md-nav__link">
    Revisit: Wildcards
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nested-class" title="Nested Class" class="md-nav__link">
    Nested Class
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#local-class" title="Local Class" class="md-nav__link">
    Local Class
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anonymous-class" title="Anonymous Class" class="md-nav__link">
    Anonymous Class
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enum" title="Enum" class="md-nav__link">
    Enum
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enums-fields-and-methods" title="Enum's Fields and Methods" class="md-nav__link">
    Enum's Fields and Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-methods-for-each-enum" title="Custom Methods for Each Enum" class="md-nav__link">
    Custom Methods for Each Enum
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-class-enum" title="The Class Enum" class="md-nav__link">
    The Class Enum
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enum-related-collections" title="Enum-related Collections" class="md-nav__link">
    Enum-related Collections
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec7/index.html" title="7. Lambda and Functions" class="md-nav__link">
      7. Lambda and Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec8/index.html" title="8. More Lambda and Streams" class="md-nav__link">
      8. More Lambda and Streams
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec9/index.html" title="9. Functors, Monads, Collectors" class="md-nav__link">
      9. Functors, Monads, Collectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec10/index.html" title="10. Parallel Streams" class="md-nav__link">
      10. Parallel Streams
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec11/index.html" title="11. Asynchronous Programming" class="md-nav__link">
      11. Asynchronous Programming
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Exercises
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Exercises
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../exercise1/index.html" title="1. Circles & Points" class="md-nav__link">
      1. Circles & Points
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../exercise2/index.html" title="2. Square & PaintedSquare" class="md-nav__link">
      2. Square & PaintedSquare
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../exercise3/index.html" title="3. PaintedSquare Revisited" class="md-nav__link">
      3. PaintedSquare Revisited
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../exercise4/index.html" title="4. Exceptions" class="md-nav__link">
      4. Exceptions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../exercise5/index.html" title="5. Streams" class="md-nav__link">
      5. Streams
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../exercise6/index.html" title="6. Functors, Collectors" class="md-nav__link">
      6. Functors, Collectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../exercise7/index.html" title="7. Mock Exam" class="md-nav__link">
      7. Mock Exam
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Labs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Labs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../lab1/index.html" title="1. Question" class="md-nav__link">
      1. Question
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab01-comments/index.html" title="1. Comments" class="md-nav__link">
      1. Comments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab2/index.html" title="2. Question" class="md-nav__link">
      2. Question
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab02-comments/index.html" title="2. Comments" class="md-nav__link">
      2. Comments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab3/index.html" title="3. Question" class="md-nav__link">
      3. Question
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab4/index.html" title="4. Question" class="md-nav__link">
      4. Question
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab5/index.html" title="5. Question" class="md-nav__link">
      5. Question
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab6/index.html" title="6. Question" class="md-nav__link">
      6. Question
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab7/index.html" title="7. Question" class="md-nav__link">
      7. Question
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab8/index.html" title="8. Question" class="md-nav__link">
      8. Question
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab9/index.html" title="9. Question" class="md-nav__link">
      9. Question
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab10/index.html" title="10. Question" class="md-nav__link">
      10. Question
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab11/index.html" title="11. Question" class="md-nav__link">
      11. Question
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Software/Tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Software/Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../jdk/index.html" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../javadoc/index.html" title="Javadoc" class="md-nav__link">
      Javadoc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../unix/index.html" title="UNIX" class="md-nav__link">
      UNIX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vim/index.html" title="Vim" class="md-nav__link">
      Vim
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#learning-outcomes" title="Learning Outcomes" class="md-nav__link">
    Learning Outcomes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unfinished-business-hash-code" title="Unfinished Business: Hash Code" class="md-nav__link">
    Unfinished Business: Hash Code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#revisit-wildcards" title="Revisit: Wildcards" class="md-nav__link">
    Revisit: Wildcards
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nested-class" title="Nested Class" class="md-nav__link">
    Nested Class
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#local-class" title="Local Class" class="md-nav__link">
    Local Class
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anonymous-class" title="Anonymous Class" class="md-nav__link">
    Anonymous Class
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enum" title="Enum" class="md-nav__link">
    Enum
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enums-fields-and-methods" title="Enum's Fields and Methods" class="md-nav__link">
    Enum's Fields and Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-methods-for-each-enum" title="Custom Methods for Each Enum" class="md-nav__link">
    Custom Methods for Each Enum
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-class-enum" title="The Class Enum" class="md-nav__link">
    The Class Enum
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enum-related-collections" title="Enum-related Collections" class="md-nav__link">
    Enum-related Collections
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/nus-cs2030/1718-s1/edit/master/docs/lec6.md" title="Edit this page" class="md-icon md-content__icon">edit</a>
                
                
                <h1 id="lecture-6-nested-classes-enum">Lecture 6: Nested Classes, Enum</h1>
<h2 id="learning-outcomes">Learning Outcomes</h2>
<ul>
<li>Understand the need to override <code class="codehilite">hashCode</code> every time <code class="codehilite">equals</code> is overriden and how to use <code class="codehilite">Arrays</code>' <code class="codehilite">hashCode</code> method to compute a hash code</li>
<li>Understand static vs non-static nested class, local class, and anonymous class and when to use / not to use one. </li>
<li>Understand the rules about final / effectively final variable access of local class and anonymous class</li>
<li>Aware of the limitation when declaring a new anonymous class</li>
<li>Understand the concept of variable capture</li>
<li>Be aware that <code class="codehilite"><span class="k">enum</span></code> is a special case of a <code class="codehilite"><span class="k">class</span></code> and share many features as a class -- not just constants can be defined.</li>
<li>Understand how <code class="codehilite"><span class="k">enum</span></code> is expanded into a subclass of <code class="codehilite">Enum</code></li>
<li>Know that enum constants can have customized fields and methods.</li>
</ul>
<h2 id="unfinished-business-hash-code">Unfinished Business: Hash Code</h2>
<p>Last week, we have seen how <code class="codehilite">HashMap</code> allows we to store a key-value pair and lookup a value with the key, and how <code class="codehilite">HashSet</code> stores item with no duplicates. </p>
<p>Internally, to implement <code class="codehilite">put</code>, <code class="codehilite">HashMap</code> calls key's <code class="codehilite">hashCode</code> to return a <code class="codehilite">int</code>, which it uses to determine which "bucket" to store the (key, value) pair.  When <code class="codehilite">get</code>, <code class="codehilite">HashMap</code> again calls <code class="codehilite">hashCode</code> on the given key to determine which bucket, then it looks for the key in the bucket.  This process, called <em>hashing</em>, circumvents the need to look through every pair in the map to find the right key.</p>
<p>You will learn more about hashing and hash tables in CS2040.</p>
<p>But, what is important here is that, two keys (two objects, in general) which are the same (<code class="codehilite">equals()</code> returns <code class="codehilite">true</code>), must have the same <code class="codehilite">hashCode()</code>.  Otherwise, <code class="codehilite">HashMap</code> would fail!</p>
<p>So it is important to ensure that if <code class="codehilite">o1.equals(o2)</code>, then <code class="codehilite">o1.hashCode() == o2.hashCode()</code>.  Note that the reverse does not have to be true -- two objects with the same hash code does not have to be equals.</p>
<p>This property is also useful for implementing <code class="codehilite">equals()</code>.  For a complex object, comparing every field for equality can be expensive.  If we can compare the hash code first, we could filter out objects with different hash code (since they cannot be equal).  We only need to compare field by field if the hash code is the same.</p>
<p>Ditto for implementation of <code class="codehilite">HashSet</code> -- to checks if an element to add already exists, <code class="codehilite">HashSet</code> uses hash code, instead of going through all the elements and compare one by one.</p>
<p>Let's see some example:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="s">&quot;hello&quot;</span><span class="o">;</span>
<span class="n">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="s">&quot;hello&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">s3</span> <span class="o">=</span> <span class="s">&quot;goodbye&quot;</span><span class="o">;</span>
<span class="n">s1</span><span class="o">.</span><span class="na">hashCode</span><span class="o">();</span>
<span class="n">s2</span><span class="o">.</span><span class="na">hashCode</span><span class="o">();</span>
<span class="n">s3</span><span class="o">.</span><span class="na">hashCode</span><span class="o">();</span>
</pre></div>
</td></tr></table>

<p>Lines 4-5 both return 99162326, an integer value that is calculated using a mathematical function, called <em>hash function</em>, so that two strings with the same content returns the same value.  Line 6 returns 207022353.</p>
<p>We can see the problem when we don't define <code class="codehilite">hashCode()</code>.  Take our <code class="codehilite">Point</code> class from before:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">jshell</span><span class="o">&gt;</span> <span class="n">Point</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Point</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span>
<span class="n">p</span> <span class="o">==&gt;</span> <span class="o">(</span><span class="mf">0.0</span><span class="o">,</span><span class="mf">0.0</span><span class="o">)</span>

<span class="n">jshell</span><span class="o">&gt;</span> <span class="n">Point</span> <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Point</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span>
<span class="n">q</span> <span class="o">==&gt;</span> <span class="o">(</span><span class="mf">0.0</span><span class="o">,</span><span class="mf">0.0</span><span class="o">)</span>

<span class="n">jshell</span><span class="o">&gt;</span> <span class="n">p</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">q</span><span class="o">);</span>
<span class="n">$5</span> <span class="o">==&gt;</span> <span class="kc">true</span>

<span class="n">jshell</span><span class="o">&gt;</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span> <span class="n">set</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;();</span>
<span class="n">set</span> <span class="o">==&gt;</span> <span class="o">[]</span>

<span class="n">jshell</span><span class="o">&gt;</span> <span class="n">set</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
<span class="n">$7</span> <span class="o">==&gt;</span> <span class="kc">true</span>

<span class="n">jshell</span><span class="o">&gt;</span> <span class="n">set</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">q</span><span class="o">);</span>
<span class="n">$8</span> <span class="o">==&gt;</span> <span class="kc">true</span>

<span class="n">jshell</span><span class="o">&gt;</span> <span class="n">set</span>
<span class="n">set</span> <span class="o">==&gt;</span> <span class="o">[(</span><span class="mf">0.0</span><span class="o">,</span><span class="mf">0.0</span><span class="o">),</span> <span class="o">(</span><span class="mf">0.0</span><span class="o">,</span><span class="mf">0.0</span><span class="o">)]</span>
</pre></div>
</td></tr></table>

<p>You can see that we are adding two points that are equals into the set.  To fix this, we need to write our own <code class="codehilite">hashCode()</code>.</p>
<p>Calculating good hash code is an involved topic, and is best left to the expert (some of you might become expert in this), but for now, we can rely on the static <code class="codehilite">hashCode</code> methods in the <code class="codehilite">Arrays</code> class to help us.  Let's add the following to <code class="codehilite">Point</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">()</span> <span class="o">{</span>
  <span class="kt">double</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">double</span><span class="o">[</span><span class="mi">2</span><span class="o">];</span>
  <span class="n">a</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">x</span><span class="o">;</span>
  <span class="n">a</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">y</span><span class="o">;</span>
  <span class="k">return</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">hashCode</span><span class="o">(</span><span class="n">a</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>Now, <code class="codehilite">set.add(q)</code> above returns false -- we can no longer add point (0,0) twice in to the set.</p>
<h2 id="revisit-wildcards">Revisit: Wildcards</h2>
<p>A generic type can be instantiated with a wildcard <code class="codehilite">?</code> as type argument:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">ArrayList</span><span class="o">&lt;?&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;();</span>
</pre></div>
</td></tr></table>

<p>You can think of <code class="codehilite"><span class="nx">ArrayList</span><span class="cp">&lt;?</span><span class="o">&gt;</span></code> as a short form for <code class="codehilite"><span class="nx">ArrayList</span><span class="cp">&lt;?</span> <span class="k">extends</span> <span class="nx">Object</span><span class="o">&gt;</span></code>, which is different from <code class="codehilite">ArrayList&lt;Object&gt;</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;();</span>
</pre></div>
</td></tr></table>

<p>The above will result in an error.</p>
<p>The first time I showed you the wildcard type is in the signature of the <code class="codehilite">Collection&lt;E&gt;</code> interface:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">containsAll</span><span class="o">(</span><span class="n">Collection</span><span class="o">&lt;?&gt;</span> <span class="n">c</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p>The implication of this declaration is that we can pass in collection of any object types.  This provide lots of flexibility, but one could argue that there is probably too much flexibility!  One could pass in a collection of <code class="codehilite">String</code> objects to check if a collection of <code class="codehilite">Integer</code> contains these <code class="codehilite">String</code> objects -- the code will say no, but it seems silly to allow this.</p>
<p>To understand why Java designer goes with the above, instead of a less silly:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">containsAll</span><span class="o">(</span><span class="n">Collection</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<p>recall that generics is introduced only after Java 5.  There are possibly a lot of legacy code that expects <code class="codehilite">containsAll</code> to take a collection of <code class="codehilite">Object</code> objects (since before generics is introduced, the only way to write generic class is to use <code class="codehilite">Object</code> like I showed you).  To keep Java backward compatible, a little bit of silliness is worth it!</p>
<h2 id="nested-class">Nested Class</h2>
<p>There are four kinds of nested classes in Java.  You have seen a static nested class, used inappropriately in Lab 2.  Let's see where are some good use cases to use nested classes.</p>
<p>Nested classes are use to group logically relevant classes together.  Typically, a nested class is tightly coupled with the container class, and would have no use outside of the container class.  The nested classes are used to encapsulate information within class, for instance, when implementation of a class becomes too complex.</p>
<p>Take the <code class="codehilite">HashMap&lt;K,V&gt;</code> class for instance.  <code class="codehilite">HashMap&lt;K,V&gt;</code> contains several nested classes, including <code class="codehilite">KeyIterator&lt;K&gt;</code>, <code class="codehilite">ValueIterator&lt;V&gt;</code> which implements a <code class="codehilite">Iterator&lt;E&gt;</code> interface for iterating through the keys and the values in the map respectively, and an <code class="codehilite">Node&lt;K,V&gt;</code> class, which encapsulates a key-value pair in the map.  These classes are declared <code class="codehilite">private</code>, since they are only used within the <code class="codehilite">LinkedList</code> class.</p>
<p>Nested class can be either static or non-static .  Just like static fields and static methods, a <em>static nested class</em> is associated with the containing <em>class</em>, NOT <em>instance</em>.  So, it can only access static fields and static methods of the containing class.  A <em>non-static nested class</em>, on the other hand, can access all fields and methods of the containing class.  A <em>non-static nested class</em> is also known as a <em>inner class</em>.</p>
<p>Note that a nested class can have read/write access even to the private fields and members of containing class.  Thus, you should really have a nested class only if the nested class belongs to the same encapsulation.  Otherwise, the containing class have a leaky abstraction barrier. </p>
<h2 id="local-class">Local Class</h2>
<p>We can declare a class within a function as well.  One example is the <code class="codehilite">EventComparator</code> class in Lab 3.  You might have felt silly to write a top-level class (in another file named <code class="codehilite">EventComparator.java</code>) just to compare two events, and you are right!</p>
<p>We can actually just define the <code class="codehilite">EventComparator</code> class when we need it, in the method that creates the event queue.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">EventComparator</span> <span class="kd">implements</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">Event</span> <span class="n">e1</span><span class="o">,</span> <span class="n">Event</span> <span class="n">e2</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">e1</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">e2</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="n">events</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PriorityQueue</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;(</span><span class="k">new</span> <span class="n">EventComparator</span><span class="o">());</span>
</pre></div>
</td></tr></table>

<p>Note that I am not putting two code snippets from different part of the code together, as I sometimes do.  I am literally declaring the class inside the method where I initialize the <code class="codehilite">events</code> variable!</p>
<p>Classes declared inside a method (to be more precise, inside a block of code between <code class="codehilite">{</code> and <code class="codehilite">}</code>) is called a local class.  Just like a local variable, a local class is scoped within the method.  Like a nested class, a local class has access to the variables of the enclosing class.</p>
<p>Recall that when a method returns, all local variables of the methods are removed from the stack.  But, an instance of that local class might still exist.  For this reason, even though a local class can access the local variables in the enclosing method, the local class makes <em>a copy of local variables</em> inside itself.  We say that a local class <em>captures</em> the local variables.   It would be confusing if the copy of the variables inside the local class has a different value than the one outside.   To avoid the confusion, Java only allow a local class to access variables that are explicitly declared <code class="codehilite">final</code> or implicitly final (or <em>effectively</em> final).  An implicitly final variable is one that does not change after initialization.  </p>
<p>Consider the following code:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kt">boolean</span> <span class="n">descendingOrder</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="kd">class</span> <span class="nc">EventComparator</span> <span class="kd">implements</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">Event</span> <span class="n">e1</span><span class="o">,</span> <span class="n">Event</span> <span class="n">e2</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">descendingOrder</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">e2</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">e1</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">e1</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">e2</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="n">descendingOrder</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">events</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PriorityQueue</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;(</span><span class="k">new</span> <span class="n">EventComparator</span><span class="o">());</span>
</pre></div>
</td></tr></table></p>
<p>In what order will the event be sorted?  Luckily, the designers of Java save us from such hair-pulling situation and disallow such code -- <code class="codehilite">descendingOrder</code> is not effectively final so the code will not compile.</p>
<p>I do not see a good use case for local class -- if you have information and behavior inside a block of code that is so complex that you need to encapsulate it within a local class, it is time to rethink your design!</p>
<p>What about the use case of <code class="codehilite">EventComparator</code> above?  Well, if the class is short enough and is only used once, then it is a good use case for <em>anonymous class</em>.</p>
<h2 id="anonymous-class">Anonymous Class</h2>
<p>An anonymous class is one where you declare a class and instantiate it in a single statement.  We do not even have to give it a name!
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">events</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PriorityQueue</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;(</span><span class="k">new</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;()</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">Event</span> <span class="n">e1</span><span class="o">,</span> <span class="n">Event</span> <span class="n">e2</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">e1</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">e2</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">});</span>
</pre></div>
</td></tr></table></p>
<p>The example above removes the need to declare just for the purpose of comparing two events.  An anonymous class has the following format: <code class="codehilite">new X (arguments) { body }</code>, where:</p>
<ul>
<li><em>X</em> is a class that the anonymous class extends or an interface that the anonymous class implements.  X cannot be empty.  This syntax also implies an anonymous class cannot extend another class and implement an interface at the same time.  Furthermore, an anonymous class cannot implements more than one interface. </li>
<li><em>arguments</em> is the arguments that you want to pass into the constructor of the anonymous class.  If the anonymous class is extending an interface, then there is no constructor, but we still need the two parenthesis <code class="codehilite">()</code>.</li>
<li><em>body</em> is the body of the class as per normal, except that we cannot have constructor for anonymous class.</li>
</ul>
<p>The syntax might look overwhelming at the beginning, but we can also write it as:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">cmp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;()</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">Event</span> <span class="n">e1</span><span class="o">,</span> <span class="n">Event</span> <span class="n">e2</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">e1</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">e2</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="n">events</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PriorityQueue</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;(</span><span class="n">cmp</span><span class="o">);</span>
</pre></div>
</td></tr></table></p>
<p>Line 1 above looks just like what we do when we instantiate a class, except that we are instantiating an interface with a <code class="codehilite">{ .. }</code> body.</p>
<p>An anonymous class is just like a local class, it captures the variables of the enclosing scope as well -- the same rules to variable access as local class applies.</p>
<h2 id="enum">Enum</h2>
<p>An <code class="codehilite"><span class="k">enum</span></code> is a special type of class in Java.  Variable of an enum type can only be one of the predefined constants.  Using enum has one advantage over the use of <code class="codehilite">int</code> for predefined constant -- it is type safe!  Consider how we have been defining different event types in Lab 2.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">CUSTOMER_ARRIVE</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">CUSTOMER_DONE</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
</pre></div>
</td></tr></table>

<p>But, we cannot prevent someone from creating an event <code class="codehilite">new Event(time, 100)</code>, passing in an invalid event type (type 100).  </p>
<p>If we define the event type as enum, then we can write like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">enum</span> <span class="n">EventType</span> <span class="o">{</span>
  <span class="n">CUSTOMER_ARRIVE</span><span class="o">,</span> 
  <span class="n">CUSTOMER_DONE</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>and the field <code class="codehilite">eventType</code> in <code class="codehilite">Event</code> now has a type <code class="codehilite">EventType</code> instead of <code class="codehilite">int</code>:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Event</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kt">double</span> <span class="n">time</span><span class="o">;</span> 
  <span class="kd">private</span> <span class="n">EventType</span> <span class="n">eventType</span><span class="o">;</span> 
<span class="o">}</span>
</pre></div>
</td></tr></table></p>
<p>Trying to assign anything other than the two predefined event type to <code class="codehilite">eventType</code> would result in compilation error.</p>
<p>Each constant of an enum type is actually an instance of the enum class and is a field in the enum class declared with <code class="codehilite">public static final</code>.  </p>
<h3 id="enums-fields-and-methods">Enum's Fields and Methods</h3>
<p>Since enum in Java is a class, we can define constructors, methods, and fields in enums.  </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">enum</span> <span class="n">Color</span> <span class="o">{</span>
  <span class="n">BLACK</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span>
  <span class="n">WHITE</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">),</span>
  <span class="n">RED</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span>
  <span class="n">BLUE</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">),</span>
  <span class="n">GREEN</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span>
  <span class="n">YELLOW</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span>
  <span class="n">PURPLE</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">r</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">g</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">b</span><span class="o">;</span>

  <span class="n">Color</span><span class="o">(</span><span class="kt">double</span> <span class="n">r</span><span class="o">,</span> <span class="kt">double</span> <span class="n">g</span><span class="o">,</span> <span class="kt">double</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">r</span> <span class="o">=</span> <span class="n">r</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">g</span> <span class="o">=</span> <span class="n">g</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">b</span> <span class="o">=</span> <span class="n">b</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">luminance</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">(</span><span class="mf">0.2126</span> <span class="o">*</span> <span class="n">r</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="mf">0.7152</span> <span class="o">*</span> <span class="n">g</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="mf">0.0722</span> <span class="o">*</span> <span class="n">b</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">&quot;(&quot;</span> <span class="o">+</span> <span class="n">r</span> <span class="o">+</span> <span class="s">&quot;, &quot;</span> <span class="o">+</span> <span class="n">g</span> <span class="o">+</span> <span class="s">&quot;, &quot;</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>In the example above, we represent a color with its RGB component.  Enum values should only constants, so <code class="codehilite">r</code>, <code class="codehilite">g</code>, <code class="codehilite">b</code> are declared as <code class="codehilite">final</code>.  We have a method that computes the luminance (the "brightness") of a color, and a <code class="codehilite">toString()</code> method.  </p>
<p>The enum values are now written as <code class="codehilite">BLACK(0, 0, 0)</code>, with arguments passed into constructor.</p>
<h3 id="custom-methods-for-each-enum">Custom Methods for Each Enum</h3>
<p>Enum in Java is more powerful than the above -- we can define custom methods for each of the enum constant, by writing <em>constant-specific class body</em>.  If we do this, then each constant becomes an anonymous class that extends the enclosing enum.   </p>
<p>Consider the event type enum.  We are going to diverge from your Labs 2 and 3 now<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup>, so that I can bring you the following eample:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">enum</span> <span class="n">EventType</span> <span class="o">{</span>
  <span class="n">CUSTOMER_ARRIVE</span> <span class="o">{</span>
    <span class="c1">// customer arrives at uniformly random interval [0, 0.5]</span>
    <span class="kt">double</span> <span class="nf">timeToNextEvent</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">rng</span><span class="o">.</span><span class="na">nextDouble</span><span class="o">()*</span><span class="mf">0.5</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">},</span>
  <span class="n">CUSTOMER_DONE</span> <span class="o">{</span>
    <span class="c1">// customer completes service at exponential random interval with mu = 1.5</span>
    <span class="kt">double</span> <span class="nf">timeToNextEvent</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="o">-</span><span class="n">Math</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">rng</span><span class="o">.</span><span class="na">nextDouble</span><span class="o">())/</span><span class="mf">1.5</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">};</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Random</span> <span class="n">rng</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
  <span class="kd">abstract</span> <span class="kt">double</span> <span class="nf">timeToNextEvent</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>In the code above, <code class="codehilite">EventType</code> is an abstract class -- <code class="codehilite">timeToNextEvent</code> is defined as <code class="codehilite">abstract</code> with no implementatino.  Each enum constant has its own implementation for calculation of time to next event.</p>
<p>Now, each event has its own method to generate the time to the next event of that type, and we can call
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">EventType</span><span class="o">.</span><span class="na">CUSTOMER_DONE</span><span class="o">.</span><span class="na">timeToNextEvent</span><span class="o">()</span>
</pre></div>
</td></tr></table>
to get the time to the next event of that particular type!</p>
<h3 id="the-class-enum">The Class <code class="codehilite">Enum</code></h3>
<p><code class="codehilite"><span class="k">enum</span></code> is a special type of class in Java.  All <code class="codehilite"><span class="k">enum</span></code> inherits from the class <code class="codehilite">Enum</code> implicitly.  Since <code class="codehilite"><span class="k">enum</span></code> is a class, we can extend <code class="codehilite"><span class="k">enum</span></code> from interfaces as per normal class.  Unfortunately, <code class="codehilite"><span class="k">enum</span></code> cannot extend another class, since it already extends from <code class="codehilite">Enum</code>.</p>
<p>One impllicitly declared method in <code class="codehilite"><span class="k">enum</span></code> is a static method:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="n">E</span><span class="o">[]</span> <span class="nf">values</span><span class="o">();</span>
</pre></div>
</td></tr></table>

<p>We can call <code class="codehilite">EventType.values()</code> or <code class="codehilite">Color.values()</code> to return an array  of event types or an array of colors.  <code class="codehilite">E</code> is a type parameter, corresponding to the enum type (either <code class="codehilite">EventType</code>, <code class="codehilite">Color</code>, etc).  To maintain flexibility and type safety, the class <code class="codehilite">Enum</code> which all enums inherit from has to be a generic class with <code class="codehilite">E</code> as a type paramter.</p>
<p>Considering <code class="codehilite">EventType</code>,
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">enum</span> <span class="n">EventType</span> <span class="o">{</span>
  <span class="n">CUSTOMER_ARRIVE</span><span class="o">,</span> 
  <span class="n">CUSTOMER_DONE</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></p>
<p>is actually 
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">EventType</span> <span class="kd">extends</span> <span class="n">Enum</span><span class="o">&lt;</span><span class="n">EventType</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">EventType</span><span class="o">[]</span> <span class="n">values</span> <span class="o">{</span> <span class="o">..</span> <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">EventType</span> <span class="nf">valueOf</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span> <span class="o">..</span> <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">EventType</span> <span class="n">CUSTOMER_ARRIVE</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">EventType</span> <span class="n">CUSTOMER_DONE</span><span class="o">;</span>
    <span class="o">:</span>

  <span class="kd">static</span> <span class="o">{</span>
    <span class="n">CUSTOMER_ARRIVE</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EventType</span><span class="o">();</span>
    <span class="n">CUSTOMER_DONE</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EventType</span><span class="o">();</span>
      <span class="o">:</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></p>
<p>Even though we can't extend from <code class="codehilite">Enum</code> directly, Java wants to ensure that <code class="codehilite">E</code> must be a subclass of <code class="codehilite">Enum</code> (so that we can't do something non-sensical like <code class="codehilite">Enum&lt;String&gt;</code>.  Furthermore, some methods from <code class="codehilite">Enum</code> (such as <code class="codehilite">compareTo()</code>) are inherited to the enum class, and these methods involved generic type <code class="codehilite">E</code>.  To ensure that the generic type <code class="codehilite">E</code> actually inherits from <code class="codehilite">Enum&lt;E&gt;</code>, Java defines the class <code class="codehilite">Enum</code> to have bounded generic type <code class="codehilite">Enum&lt;E extends Enum&lt;E&gt;&gt;</code>.</p>
<p>The expansion of enum <code class="codehilite">EventType</code> to a class above also illustrates a few points:</p>
<ul>
<li><code class="codehilite"><span class="k">enum</span></code> are finals.  We cannot inherit from enum (those with constant-specifc body are exceptions).</li>
<li>A class in Java can contains fields of the same class.</li>
<li>The block marked by <code class="codehilite">static { .. }</code> are <em>static initializers</em>, they are called when the class is first used.  They are the counterpart to constructors for objects, and are useful for non-trivial initialization of static fields in a class.</li>
</ul>
<h2 id="enum-related-collections">Enum-related Collections</h2>
<p>Java Collection Frameworks provide two useful classes <code class="codehilite">EnumSet</code> and <code class="codehilite">EnumMap</code> -- they can be viewed as special cases of <code class="codehilite">HashSet</code> and <code class="codehilite">HashMap</code> respectively -- the only different is that we can only put enum values into <code class="codehilite">EnumSet</code> and enum-type keys into <code class="codehilite">EnumMap</code>. </p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>This may or may not be the best way to solve Lab 3. &#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../lec5/index.html" title="5. Numbers, Strings, Collections" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                5. Numbers, Strings, Collections
              </span>
            </div>
          </a>
        
        
          <a href="../lec7/index.html" title="7. Lambda and Functions" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                7. Lambda and Functions
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright by Wei Tsang Ooi, Department of Computer Science, National University of Singapore 2017
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-c35428f87f.js"></script>
      
      
      <script>app.initialize({url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
    
      
    
  </body>
</html>